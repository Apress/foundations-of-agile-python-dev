<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="Author" content="Ward Cunningham">
   <meta name="GENERATOR" content="Mozilla/4.5 [en]C-CCK-MCD compaq  (Win98; U) [Netscape]">
   <title>Arithmetic</title>
</head>
<body>

<h1>
Integer Arithmetic</h1>

<p>The computer relies on arithmetic. Here we test a variety of arithmetic
operations expressed as 32 bit two's complement binary numbers (Java's
int).
<br>&nbsp;
<table BORDER COLS=7 CELLSPACING=0 CELLPADDING=3 >
<tr>
<td COLSPAN="7">eg.ArithmeticFixture</td>
</tr>

<tr>
<td>x</td>
<td>y</td>
<td>+</td>
<td>-</td>
<td>*</td>
<td>/</td>
<td>&nbsp;</td>
</tr>

<tr>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>error</td>
<td>Integer divide exception is expected</td>
</tr>

<tr>
<td>1</td>
<td>2</td>
<td>3</td>
<td>-1</td>
<td>2</td>
<td>0.5</td>
<td>The divide non-compare is expected</td>
</tr>

<tr>
<td>1</td>
<td>-1</td>
<td>0</td>
<td>2</td>
<td>-1</td>
<td>-1</td>
<td>&nbsp;</td>
</tr>

<tr>
<td>10000</td>
<td>10000</td>
<td>20000</td>
<td>0</td>
<td>100000000</td>
<td>1</td>
<td>&nbsp;</td>
</tr>

<tr>
<td>100000</td>
<td>100000</td>
<td>200000</td>
<td>0</td>
<td>10000000000</td>
<td>1</td>
<td>&nbsp;</td>
</tr>

<tr>
<td>1000000</td>
<td>1000000</td>
<td>2000000</td>
<td>0</td>
<td>1000000000000</td>
<td>1</td>
<td>&nbsp;</td>
</tr>
</table>
<br><br>
The divide by zero exception and the error just under it are
expected. The stack trace is probably excessive, though. The error
under it is caused by using integer arithmetic: the quotient
will always be an integer, so it cannot compare equal to 0.5.
<br>
Also, notice that some of the numbers are larger than you
would expect from 32 bit integer arithmetic. That's because
I changed them for the Python version; Python has unlimited
precision integers, and there was no way to duplicate the
hash Java makes of integer overflows.
<br><br>
Now we try something similar using automatic type conversion offered by ColumnFixtures.
<br><br>

<table BORDER CELLSPACING=0 CELLPADDING=3>
    <tr>
        <td colspan=7>eg.ArithmeticColumnFixture</td>
    </tr>
    <tr>
        <td>x</td>
        <td>y</td>
        <td>plus()</td>
        <td>times()</td>
        <td>divide()</td>
        <td>floating()</td>
        <td>&nbsp;</td>
    </tr>
    <tr>
        <td>2</td>
        <td>3</td>
        <td>5</td>
        <td>6</td>
        <td>0</td>
        <td>0.666667</td>
        <td>&nbsp;</td>
    </tr>
    <tr>
        <td>0</td>
        <td>0</td>
        <td>0</td>
        <td>0</td>
        <td>error</td>
        <td>error</td>
        <td>&nbsp;</td>
    </tr>
    <tr>
        <td>0</td>
        <td>0</td>
        <td>0</td>
        <td>0</td>
        <td></td>
        <td></td>
        <td>&nbsp;</td>
    </tr>
    <tr>
        <td>200</td>
        <td>300</td>
        <td>500</td>
        <td>60000</td>
        <td>0</td>
        <td>0.666667</td>
        <td>&nbsp;</td>
    </tr>
    <tr>
        <td>2</td>
        <td>3</td>
        <td>10</td>
        <td>10</td>
        <td>10</td>
        <td>&nbsp;</td>
        <td>Expected Errors</td>
   </tr>
    <tr>
        <td>200</td>
        <td>3</td>
        <td>5</td>
        <td>6</td>
        <td>0</td>
        <td>0.666667</td>
        <td>Expected Errors</td>
    </tr>
    <tr>
        <td>2</td>
        <td>-3</td>
        <td>-1</td>
        <td>-6</td>
        <td>-1</td>
        <td>-0.666667</td>
        <td>The expected result for the integer divide<br>
            was changed from 0 to -1 because of Python's<br>
            use of "floor division."</td>
    </tr>
</table>

<br><br>
Several of the errors in this one are planned; the
incorrect values were there originally to show off
the nice red background for an error.
<br>
"error" is a value that will compare to an exception;
that's what the green background with the "error" message
is in the third row. What the ones with the white background
are is another question: I'd expect an exception since there
wasn't any value there originally, but it seems to put
"error" in there anyway.
<br>
<table BORDER CELLSPACING=0 CELLPADDING=3>
<tr>
<td COLSPAN="2">fit.Summary</td>
</tr>
</table>



<p>Document prepaired by Ward Cunningham
<br>First Version July 11, 2002
<br>Last Update August 17, 2002
<br>Notes added by John Roth April 22, 2004
</body>
</html>
